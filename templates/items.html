{% extends 'app.html' %}
{% load static %}

{% block content %}
  {% if user.is_authenticated %}
    <h2>{{ list.name }}</h2>
    <p>Share list: <a href="http://{{ request.get_host }}/{{ list.share }}">{{ request.get_host }}/{{ list.share }}</a></p>
    <div class="item-form">
      <form action="." method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.as_p }}
        <input id="user" name="user" type="hidden" value="{{ user }}">
        <input type="submit" value="Add item">
      </form>
    </div>

    <hr class="line" />

    {% for item in list.item_set.all %}
      <div class="row">
        <div class="item">
          {% if item.image %}
            <img class="item-image" src="{{MEDIA_URL}}{{ item.image }}" alt="" />
          {% else %}
            <img class="item-image" src="{{MEDIA_URL}}default.jpg" alt="" />
          {% endif %}
          <h4 class="name">{{ item.name }}</h4>

          <div class="links">
            {% if item.url %}
              <i class="fa fa-link"></i>
              {% if complete_item_url %}
                <a class="url" target="_blank" href="{{ item.url }}">{{item.url}}</a>
              {% else %}
                <a class="url" target="_blank" href="http://{{ item.url }}">{{item.url}}</a>
              {% endif %}
            {% endif %}
            {% if item.location %}
              <i class="fa fa-map-marker"></i>
              <a class="location" target="_blank" href="http://maps.google.com/?q={{ item.location }}">
                {{ item.location }}
              </a>
            {% endif %}
          </div>

          <p class="price_range"><b>Price:</b>{{ item.price_range }}</p>
          <p class="description"><b>Description:</b> {{ item.description }}</p>
          <a class="delete" href='delete/{{item.id}}/'>Delete</a>
        </div>
      </div>
    {% endfor %}

  {% else %}
    <p>Du er ikke logget inn (<a href="{% url 'login' %}">login</a>)</p>
  {% endif %}
{% endblock %}
